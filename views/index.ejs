<% layout("./layouts/boilerplate.ejs") %>
    <!-- BIG SLIDESHOW -->
    <div class="d-flex justify-content-between">
        <section id="carouselExampleCaptions" class="carousel slide border border-1 border-light p-1 rounded shadow"
            data-bs-ride="carousel">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <!-- Bleah, I know. -->
                <% let isFirst=true; %>
                    <% for (postCarousel of postsCarousel) { %>
                        <article class="carousel-item <%= isFirst ? " active" : "" %>">
                            <% isFirst=false; %>
                                <img src="<%= postCarousel.resizeImage(1280, 720) %>"
                                    class="d-block border rounded w-100 h-100" alt="Image of the slide-show post"
                                    style="filter: brightness(50%);">
                                <div class="carousel-caption">
                                    <h4>
                                        <%= postCarousel.title %>
                                    </h4>
                                    <p class="d-none d-md-block">
                                        <%= postCarousel.text.substring(0, 120) %>...
                                    </p>
                                </div>
                        </article>
                        <% } %>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </section>
        <!-- NEWSLETTER SUBSCRIPTION -->
        <aside class="col-8 offet-2 offset-lg-0 ms-0 col-lg-3 ms-lg-5 mt-5 mt-lg-0 align-self-center d-none d-lg-block">
            <form class="card p-4 pt-3 shadow">
                <h2>Subscribe to the newsletter</h2>
                <div class="mb-3">
                    <label for="exampleInputEmail1" class="form-label">Email address</label>
                    <input type="email" class="form-control bg-light" id="exampleInputEmail1"
                        aria-describedby="emailHelp">
                    <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
                </div>
                <div class="mb-3 form-check">
                    <input type="checkbox" class="form-check-input" id="exampleCheck1">
                    <label class="form-check-label" for="exampleCheck1">Allow Something</label>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>
        </aside>
    </div>
    <!-- MINI POSTS -->
    <section class="mt-3 mt-md-5 d-flex flex-column flex-md-row justify-content-between">
        <% for (postMini of postsMini) { %>
            <article class="col-md-3 mb-2 mt-2 mb-md-0 mt-md-0">
                <div class="rounded-3">
                    <img src="<%= postMini.resizeImage(480, 320)%>" class="card-img-top mb-1" alt="...">
                    <div class="">
                        <span class="text-secondary">
                            <%= postMini.categories.map(category=> category.replace(category.charAt(0),
                                category.charAt(0).toUpperCase())).join(", ") %>
                        </span>
                        <h5 class="mb-3 mt-1">
                            <%= postMini.text.substring(0, 60) %> ...
                        </h5>
                        <div>
                            <a href="/posts/<%= postMini._id %>" class="btn btn-sm btn-outline-primary">Read More</a>
                        </div>
                    </div>
                </div>
            </article>
            <% } %>
    </section>

    <aside class="d-block d-lg-none mt-5 col-md-6 offset-md-3">
        <form class="card p-4 pt-3 shadow">
            <h2>Subscribe to the newsletter</h2>
            <div class="mb-3">
                <label for="exampleInputEmail1" class="form-label">Email address</label>
                <input type="email" class="form-control bg-light" id="exampleInputEmail1" aria-describedby="emailHelp">
                <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
            </div>
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="exampleCheck1">
                <label class="form-check-label" for="exampleCheck1">Allow Something</label>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </aside>
    </section>